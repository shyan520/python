[TOC]

# 前言

如何学习编写第一个程序，每个程序员都有不同的故事。我还是个孩子时就开始学习编程了，当时我父亲在计算时代的先锋之一——数字设备公司（Digital Equipment Corporation）工作。我使用一台简陋的计算机编写了第一个程序，这台计算机是父亲在家里的地下室组装而成的，它没有机箱，裸露的主板与键盘相连，显示器是裸露的阴极射线管。我编写的这个程序是一款简单的猜数字游戏，其输出类似于下面这样：

```
I'm thinking of a number! Try to guess the number I'm thinking of: 25
Too low! Guess again: 50
Too high! Guess again: 42
That's it! Would you like to play again? (yes/no) no
Thanks for playing! 
```

看到家人玩着我编写的游戏，而且它完全按我预期的方式运行，我心里不知有多满足。此情此景我永远都忘不了。

儿童时期的这种体验一直影响我至今。现在，每当我通过编写程序解决了一个问题时，心里都会感到非常满足。相比于孩提时期，我现在编写的软件满足了更大的需求，但通过编写程序获得的满足感几乎与从前一样。

## **读者对象**

本书旨在让你尽快学会 Python，以便能够编写能正确运行的程序——游戏、数据可视化和 Web 应用程序，同时掌握让你终身受益的基本编程知识。本书适合任何年龄的读者阅读，它不要求你有任何 Python 编程经验，甚至不要求你有编程经验。如果你想快速掌握基本的编程知识以便专注于开发感兴趣的项目，并想通过解决有意义的问题来检查你对新学概念的理解程度，那么本书就是为你编写的。本书还可供初中和高中教师用来通过开发项目向学生介绍编程。

## **本书内容**

本书旨在让你成为优秀的程序员，具体地说，是优秀的 Python 程序员。通过阅读本书，你将迅速掌握编程概念，打下坚实的基础，并养成良好的习惯。阅读本书后，你就可以开始学习 Python 高级技术，并能够更轻松地掌握其他编程语言。

在本书的第一部分，你将学习编写 Python 程序时需要熟悉的基本编程概念，你刚接触几乎任何编程语言时都需要学习这些概念。你将学习各种数据以及在程序中将数据存储到列表和字典中的方式。你将学习如何创建数据集合以及如何高效地遍历这些集合。你将学习使用`while`和`if`语句来检查条件，并在条件满足时执行代码的一部分，而在条件不满足时执行代码的另一部分——这可为自动完成处理提供极大的帮助。

你将学习获取用户输入，让程序能够与用户交互，并在用户没停止输入时保持运行状态。你将探索如何编写函数来让程序的各个部分可重用，这样你编写执行特定任务的代码后，想使用它多少次都可以。然后，你将学习使用类来扩展这种概念以实现更复杂的行为，从而让非常简单的程序也能处理各种不同的情形。你将学习编写妥善处理常见错误的程序。学习这些基本概念后，你就能编写一些简短的程序来解决一些明确的问题。最后，你将向中级编程迈出第一步，学习如何为代码编写测试，以便在进一步改进程序时不用担心可能引入 bug。第一部分介绍的知识让你能够开发更大、更复杂的项目。

在第二部分，你将利用在第一部分学到的知识来开发三个项目。你可以根据自己的情况，以最合适的顺序完成这些项目；你也可以选择只完成其中的某些项目。在第一个项目（第12~14章）中，你将创建一个类似于《太空入侵者》的射击游戏。这个游戏名为《外星人入侵》，它包含多个难度不断增加的等级。完成这个项目后，你就能够自己动手开发 2D 游戏了。

第二个项目（第15~17章）介绍数据可视化。数据科学家的目标是通过各种可视化技术来搞懂海量信息。你将使用通过代码生成的数据集、已经从网络下载下来的数据集以及程序自动下载的数据集。完成这个项目后，你将能够编写能对大型数据集进行筛选的程序，并以可视化方式将筛选出来的数据呈现出来。

在第三个项目（第18~20章）中，你将创建一个名为“学习笔记”的小型 Web 应用程序。这个项目能够让用户将学到的与特定主题相关的概念记录下来。你将能够分别记录不同的主题，还可以让其他人建立账户并开始记录自己的学习笔记。你还将学习如何部署这个项目，让任何人都能够通过网络访问它，而不管他身处何方。

## **为何使用 Python**

继续使用 Python，还是转而使用其他语言——也许是编程领域较新的语言？我每年都会考虑这个问题。可我依然专注于 Python，其中的原因很多。Python 是一种效率极高的语言：相比于众多其他的语言，使用 Python 编写时，程序包含的代码行更少。Python 的语法也有助于创建整洁的代码：相比其他语言，使用 Python 编写的代码更容易阅读、调试和扩展。

大家将 Python 用于众多方面：编写游戏、创建 Web 应用程序、解决商业问题以及供各类有趣的公司开发内部工具。Python 还在科学领域被大量用于学术研究和应用研究。

我依然使用 Python 的一个最重要的原因是，Python 社区有形形色色充满激情的人。对程序员来说，社区非常重要，因为编程绝非孤独的修行。大多数程序员都需要向解决过类似问题的人寻求建议，经验最为丰富的程序员也不例外。需要有人帮助解决问题时，有一个联系紧密、互帮互助的社区至关重要，而对于像你一样将 Python 作为第一门语言来学习的人而言，Python 社区无疑是坚强的后盾。

Python 是一门杰出的语言，值得你去学习，咱们现在就开始吧！

# 致谢

要是没有 No Starch Press 出色的专业人士的帮助，本书根本不可能出版。Bill Pollock 邀请我编写一本入门图书，因此这里要深深感谢他给予我这样的机会。Tyler Ortman 在我编写本书的早期帮助我理清思路。Liz Chadwick 和 Leslie Shen 详细阅读了每一章，并提出了宝贵的意见，而 Anne Marie Walker 让本书的很多地方都更清晰。Riley Hoffman 回答了我就图书出版过程提出的每个问题，并且耐心地将我的作品变成了漂亮的图书。

感谢技术审稿人 Kenneth Love。我与 Kenneth 相识于一次 PyCon 大会，他对 Python 和 Python 社区充满热情，一直是我获取专业灵感的源泉。Kenneth 不仅检查了本书介绍的知识是否正确，还抱着让初学编程者对 Python 语言和编程有扎实认识的目的进行了审阅。即便如此，倘若书中有任何不准确的地方，责任都完全由我承担。

感谢我的父亲，感谢他在我很小的时候就向我介绍编程，而且一点都不担心我破坏他的设备。感谢妻子 Erin 在我编写本书期间对我一如既往的鼓励和支持。还要感谢儿子 Ever，他的好奇心每天都会给我带来灵感。

# 第一部分　基础知识

本书的第一部分介绍编写 Python 程序所需要熟悉的基本概念，其中很多都适用于所有编程语言，因此它们在你的整个程序员生涯中都很有用。

第 1 章介绍在计算机中安装 Python，并运行第一个程序——它在屏幕上打印消息“Hello world!”。

第 2 章论述如何在变量中存储信息以及如何使用文本和数字。

第 3 章和第 4 章介绍列表。使用列表能够在一个变量中存储任意数量的信息，从而高效地处理数据：只需几行代码，你就能够处理数百、数千乃至数百万个值。

第 5 章讲解使用 if 语句来编写这样的代码：在特定条件满足时采取一种措施，而在该条件不满足时采取另一种措施。

第 6 章演示如何使用 Python 字典，将不同的信息关联起来。与列表一样，你也可以根据需要在字典中存储任意数量的信息。

第 7 章讲解如何从用户那里获取输入，以让程序变成交互式的。你还将学习 while 循环，它不断地运行代码块，直到指定的条件不再满足为止。

第 8 章介绍编写函数。函数是执行特定任务的被命名的代码块，你可以根据需要随时运行它。

第 9 章介绍类，它让你能够模拟实物，如小狗、小猫、人、汽车、火箭等，让你的代码能够表示任何真实或抽象的东西。

第 10 章介绍如何使用文件，以及如何处理错误以免程序意外地崩溃。你需要在程序关闭前保存数据，并在程序再次运行时读取它们。你将学习 Python 异常，它们让你能够未雨绸缪，从而让程序妥善地处理错误。

第 11 章为代码编写测试，以核实程序是否像你期望的那样工作。这样，扩展程序时，你就不用担心引入新的 bug。要想脱离初级程序员的阵容，跻身于中级程序员的行列，测试代码是你必须掌握的基本技能之一。

## 第1章　起步

### **老齐导读**

一定要访问 Python 官方网站[www.python.org](https://gitbook.cn/m/mazi/columns/5ce3cfab3481b33762ae04b6/topics/www.python.org)

书中介绍了不同操作系统的 Python 编程环境配置方法，同学按照书中讲述，基本可以完成。如果遇到问题了，可以用如下方式解决：

- 参考「前言」中推荐的有关资料
- 到网上去搜
- 如果已经按照书上的步骤把 Python 环境配置好了，请一定要记住，再向前走一步——配置环境变量。

关于 IDE，为了有更多的选择，我再推荐几个：

1. Python 自带的 IDLE。Python 环境安装之后，就自带了一个非常简单的编辑器。当然，这个仅供玩一玩使用了。如果真正的学习，乃至于将来工程上用，这个远远不够。
2. Vim 和 Emacs。一个被称为“编辑器之神”，另外一个称为“神的编辑器”。如果不了解，建议网上搜一下。我以前用 Vim，后来被年轻人策反了，改用 VScode。
3. VScode。这个是微软开源出来的，很好用。我现在就使用。<https://devblogs.microsoft.com/python/python-in-visual-studio-code-april-2019-release/>
4. 还有 Sublim，PyCharm 等，甚至于在 Java 中常用的 Eclipse 都是用的比较多的。

不管什么 IDE，选择一个，把它用的更称心应手。当然，如果将来做数据科学或者机器学习，更多的是使用 Jupyter。

本章知识导图如下。用椭圆标记的表示学习者可以拓展的部分，如果有兴趣可以通过相关资料拓展。

![enter image description here](https://images.gitbook.cn/b1e4e650-8b25-11e9-b6ad-75422f81aa28)

> 在本章中，你将运行自己的第一个程序——hello_world.py。为此，你首先需要检查自己的计算机是否安装了 Python；如果没有安装，你需要安装它。你还要安装一个文本编辑器，用于编写和运行 Python 程序。你输入 Python 代码时，这个文本编辑器能够识别它们并突出显示不同的部分，让你能够轻松地了解代码的结构。

### **1.1　搭建编程环境**

在不同的操作系统中，Python 存在细微的差别，因此有几点你需要牢记在心。这里将介绍大家使用的两个主要的 Python 版本，并简要介绍 Python 的安装步骤。

#### **1.1.1　Python 2 和 Python 3**

当前，有两个不同的 Python 版本：Python 2 和较新的 Python 3。每种编程语言都会随着新概念和新技术的推出而不断发展，Python 的开发者也一直致力于丰富和强化其功能。大多数修改都是逐步进行的，你几乎意识不到，但如果你的系统安装的是 Python 3，那么有些使用 Python 2 编写的代码可能无法正确地运行。在本书中，我将指出 Python 2 和 Python 3 的重大差别，这样无论你安装的是哪个 Python 版本，都能够按书中的说明去做。

如果你的系统安装了这两个版本，请使用 Python 3；如果没有安装 Python，请安装 Python 3；如果只安装了 Python 2，也可直接使用它来编写代码，但还是尽快升级到 Python 3 为好，因为这样你就能使用最新的 Python 版本了。

#### **1.1.2　运行 Python 代码片段**

Python 自带了一个在终端窗口中运行的解释器，让你无需保存并运行整个程序就能尝试运行 Python 代码片段。

本书将以如下方式列出代码片段：

```
❶ >>> print("Hello Python interpreter!")
Hello Python interpreter!
```

加粗的文本表示需要你输入之后按回车键来执行的代码。本书的大多数示例都是独立的小程序，你将在编辑器中执行它们，因为大多数代码都是这样编写出来的。然而，为高效地演示某基本概念，需要在 Python 终端会话中执行一系列代码片段。只要代码清单中包含三个尖括号（如❶所示），就意味着输出来自终端会话。稍后将演示如何在 Python 解释器中编写代码。

#### **1.1.3　Hello World 程序**

长期以来，编程界都认为刚接触一门新语言时，如果首先使用它来编写一个在屏幕上显示消息“Hello world!”的程序，将给你带来好运。

要使用 Python 来编写这种 Hello World 程序，只需一行代码：

```
print("Hello world!")
```

这种程序虽然简单，却有其用途：如果它能够在你的系统上正确地运行，你编写的任何 Python 程序都将如此。稍后将介绍如何在特定的系统中编写这样的程序。

### **1.2　在不同操作系统中搭建 Python 编程环境**

Python 是一种跨平台的编程语言，这意味着它能够运行在所有主要的操作系统中。在所有安装了 Python 的现代计算机上，都能够运行你编写的任何 Python 程序。然而，在不同的操作系统中，安装 Python 的方法存在细微的差别。

在这一节中，你将学习如何在自己的系统中安装 Python 和运行 Hello World 程序。你首先要检查自己的系统是否安装了 Python，如果没有，就安装它；接下来，你需要安装一个简单的文本编辑器，并创建一个空的 Python 文件——hello_world.py。最后，你将运行 Hello World 程序，并排除各种故障。我将详细介绍如何在各种操作系统中完成这些任务，让你能够搭建一个对初学者友好的 Python 编程环境。

#### **1.2.1　在 Linux 系统中搭建 Python 编程环境**

Linux 系统是为编程而设计的，因此在大多数 Linux 计算机中，都默认安装了 Python。编写和维护 Linux 的人认为，你很可能会使用这种系统进行编程，他们也鼓励你这样做。鉴于此，要在这种系统中编程，你几乎不用安装什么软件，也几乎不用修改设置。

**1. 检查 Python 版本**

在你的系统中运行应用程序 Terminal（如果你使用的是 Ubuntu，可按 Ctrl+Alt+T），打开一个终端窗口。为确定是否安装了 Python，执行命令`python`（请注意，其中的 p 是小写的）。输出将类似下面这样，它指出了安装的 Python 版本；最后的`>>>`是一个提示符，让你能够输入 Python 命令。

```
$ python
Python 2.7.6 (default, Mar 22 2014, 22:59:38)
[GCC 4.8.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>>
```

上述输出表明，当前计算机默认使用的 Python 版本为 Python 2.7.6。看到上述输出后，如果要退出 Python 并返回到终端窗口，可按 Ctrl+D 或执行命令`exit()`。

要检查系统是否安装了 Python 3，可能需要指定相应的版本。换句话说，如果输出指出默认版本为 Python 2.7，请尝试执行命令`python3`：

```
$ python3
Python 3.5.0 (default, Sep 17 2015, 13:05:18)
[GCC 4.8.4] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>>
```

上述输出表明，系统中也安装了 Python 3，因此你可以使用这两个版本中的任何一个。在这种情况下，请将本书中的命令`python`都替换为`python3`。大多数 Linux 系统都默认安装了 Python，但如果你的 Linux 系统不知什么原因没有安装 Python 或只安装了 Python 2，而你要安装 Python 3，请参见附录 A。

**2. 安装文本编辑器**

Geany 是一款简单的文本编辑器：它易于安装；让你能够直接运行几乎所有的程序（而无需通过终端来运行）；使用不同的颜色来显示代码，以突出代码语法；在终端窗口中运行代码，让你能够习惯使用终端。附录 B 介绍了其他一些文本编辑器，但我强烈建议你使用 Geany，除非你有充分的理由不这样做。

在大多数 Linux 系统中，都只需执行一个命令就可以安装 Geany：

```
$ sudo apt-get install geany
```

如果这个命令不管用，请参阅 <http://geany.org/Download/ThirdPartyPackages/>的说明。

**3. 运行 Hello World 程序**

为编写第一个程序，需要启动 Geany。为此，可按超级（Super）键（俗称 Windows 键），并在系统中搜索 Geany。找到 Geany 后，双击以启动它；再将其拖曳到任务栏或桌面上，以创建一个快捷方式。接下来，创建一个用于存储项目的文件夹，并将其命名为 python_work（在文件名和文件夹名中，最好使用小写字母，并使用下划线来表示空格，因为这是 Python 采用的命名约定）。回到 Geany，选择菜单 File ▶ Save As，将当前的空 Python 文件保存到文件夹 python_work，并将其命名为 hello_world.py。扩展名.py 告诉 Geany，文件包含的是 Python 程序；它还让 Geany 知道如何运行该程序，并以有益的方式突出其中的代码。

保存文件后，在其中输入下面一行代码：

```
print("Hello Python world!")
```

如果你的系统安装了多个 Python 版本，就必须对 Geany 进行配置，使其使用正确的版本。为此，可选择菜单 Build（生成）▶ Set Build Commands（设置生成命令）；你将看到文字 Compile（编译）和 Execute（执行），它们旁边都有一个命令。默认情况下，这两个命令都是`python`，要让 Geany 使用命令`python3`，必须做相应的修改。

如果在终端会话中能够执行命令`python3`，请修改编译命令和执行命令，让 Geany 使用 Python 3 解释器。为此，将编译命令修改成下面这样：

```
python3 -m py_compile "%f"
```

你必须完全按上面的代码显示的那样输出这个命令，确保空格和大小写都完全相同。

将执行命令修改成下面这样：

```
python3 "%f"
```

同样，务必确保空格和大小写都完全与显示的相同。图1-1显示了该如何在 Geany 中配置这些命令。

![{%}](http://www.ituring.com.cn/figures/2016/PythonProgramme/05.d01z.001.png)

**图1-1　在 Linux 中配置 Geany，使其使用 Python 3**

现在来运行程序 hello_world.py。为此，可选择菜单 Build ▶ Execute、单击 Execute 图标（两个齿轮）或按 F5。将弹出一个终端窗口，其中包含如下输出：

```
Hello Python world!

------------------
(program exited with code: 0)
Press return to continue
```

如果没有看到这样的输出，请检查你输入的每个字符。你是不是将`print`的首字母大写了？是不是遗漏了引号或括号？编程语言对语法的要求非常严格，只要你没有严格遵守语法，就会出错。如果代码都正确，这个程序也不能正确地运行，请参阅1.3节。

**4. 在终端会话中运行 Python 代码**

你可以打开一个终端窗口并执行命令`python`或`python3`，再尝试运行 Python 代码片段。检查 Python 版本时，你就这样做过。下面再次这样做，但在终端会话中输入如下代码行：

```
>>> print("Hello Python interpreter!")
Hello Python interpreter!
>>>
```

消息将直接打印到当前终端窗口中。别忘了，要关闭 Python 解释器，可按 Ctrl+D 或执行命令`exit()`。

#### **1.2.2　在 OS X 系统中搭建 Python 编程环境**

大多数 OS X 系统都默认安装了 Python。确定安装了 Python 后，你还需安装一个文本编辑器，并确保其配置正确无误。

**1. 检查是否安装了 Python**

在文件夹 Applications/Utilities 中，选择 Terminal，打开一个终端窗口；你也可以按 Command+空格键，再输入`terminal`并按回车。为确定是否安装了 Python，请执行命令`python`（注意，其中的 p 是小写的）。输出将类似于下面这样，它指出了安装的 Python 版本；最后的`>>>`是一个提示符，让你能够输入 Python 命令。

```
$ python
Python 2.7.5 (default, Mar 9 2014, 22:15:05)
[GCC 4.2.1 Compatible Apple LLVM 5.0 (clang-500.0.68)] on darwin
Type "help", "copyright", "credits", or "license" for more information.
>>>
```

上述输出表明，当前计算机默认使用的 Python 版本为 Python 2.7.5。看到上述输出后，如果要退出 Python 并返回到终端窗口，可按 Ctrl+D 或执行命令`exit()`。

要检查系统是否安装了 Python 3，可尝试执行命令`python3`。可能会出现一条错误消息，但如果输出指出系统安装了 Python 3，则无需安装就可使用它。如果在你的系统中能够执行命令`python3`，则对于本书的所有命令`python`，都请替换为命令`python3`。如果不知道出于什么原因你的系统没有安装 Python，或者只安装了 Python 2，而你又想安装 Python 3，请参阅附录 A。

**2. 在终端会话中运行 Python 代码**

你可以打开一个终端窗口并执行命令`python`或`python3`，再尝试运行 Python 代码片段。检查 Python 版本时，你就这样做过。下面再次这样做，但在终端会话中输入如下代码行：

```
>>> print("Hello Python interpreter!")
Hello Python interpreter!
>>>
```

消息将直接打印到当前终端窗口中。别忘了，要关闭 Python 解释器，可按 Ctrl+D 或执行命令`exit()`。

**3. 安装文本编辑器**

Sublime Text 是一款简单的文本编辑器：它在 OS X 中易于安装；让你能够直接运行几乎所有程序（而无需通过终端）；使用不同的颜色来显示代码，以突出代码语法；在内嵌在 Sublime Text 窗口内的终端会话中运行代码，让你能够轻松地查看输出。附录 B 介绍了其他一些文本编辑器，但我强烈建议你使用 Sublime Text，除非你有充分的理由不这样做。

要下载 Sublime Text 安装程序，可访问 <http://sublimetext.com/3>，单击 Download 链接，并查找 OS X 安装程序。Sublime Text 的许可策略非常灵活，你可以免费使用这款编辑器，但如果你喜欢它并想长期使用，建议你购买许可证。下载安装程序后，打开它，再将 Sublime Text 图标拖放到 Applications 文件夹。

**4. 配置 Sublime Text 使其使用 Python 3**

如果你启动 Python 终端会话时使用的命令不是`python`，就需要配置 Sublime Text，让它知道到系统的什么地方去查找正确的 Python 版本。要获悉 Python 解释器的完整路径，请执行如下命令：

```
$ type -a python3
python3 is /usr/local/bin/python3
```

现在，启动 Sublime Text，并选择菜单 Tools ▶ Build System ▶ New Build System，这将打开一个新的配置文件。删除其中的所有内容，再输入如下内容：

```
{
    "cmd": ["/usr/local/bin/python3", "-u", "$file"],
}
```

这些代码让 Sublime Text 使用命令`python3`来运行当前打开的文件。请确保其中的路径为你在前一步使用命令`type -a python3`获悉的路径。将这个配置文件命名为 Python3.sublime-build，并将其保存到默认目录——你选择菜单 Save 时 Sublime Text 打开的目录。

**5. 运行 Hello World 程序**

为编写第一个程序，需要启动 Sublime Text。为此，可打开文件夹 Applications，并双击图标 Sublime Text；也可按 Command+空格键，再在弹出的搜索框中输入 sublime text。

创建一个用于存储项目的文件夹，并将其命名为 python_work（在文件名和文件夹名中，最好使用小写字母，并使用下划线来表示空格，因为这是 Python 采用的命名约定）。在 Sublime Text 中，选择菜单 File ▶ Save As，将当前的空 Python 文件保存到文件夹 python_work，并将其命名为 hello_world.py。扩展名.py 告诉 Sublime Text，文件包含的是 Python 程序；它还让 Sublime Text 知道如何运行该程序，并以有益的方式突出其中的代码。

保存文件后，在其中输入下面一行代码：

```
print("Hello Python world!")
```

如果在系统中能够运行命令`python`，就可选择菜单 Tools ▶ Build 或按 Ctrl+B 来运行程序。如果你对 Sublime Text 进行了配置，使其使用的命令不是`python`，请选择菜单 Tools ▶ Build System，再选择 Python 3。这将把 Python 3 设置为默认使用的 Python 版本；此后，你就可选择菜单 Tools ▶ Build 或按 Command+B 来运行程序了。

Sublime Text 窗口底部将出现一个终端屏幕，其中包含如下输出：

```
Hello Python world!
[Finished in 0.1s]
```

如果没有看到这样的输出，请检查你输入的每个字符。你是不是将`print`的首字母大写了？是不是遗漏了引号或括号？编程语言对语法的要求非常严格，只要你没有严格遵守语法，就会出错。如果代码都正确，这个程序也不能正确地运行，请参阅1.3节。

#### **1.2.3　在 Windows 系统中搭建 Python 编程环境**

Windows 系统并非都默认安装了 Python，因此你可能需要下载并安装它，再下载并安装一个文本编辑器。

**1. 安装 Python**

首先，检查你的系统是否安装了 Python。为此，在“开始”菜单中输入`command`并按回车以打开一个命令窗口；你也可按住 Shift 键并右击桌面，再选择“在此处打开命令窗口”。在终端窗口中输入 python 并按回车；如果出现了 Python 提示符（`>>>`），就说明你的系统安装了 Python。然而，你也可能会看到一条错误消息，指出`python`是无法识别的命令。

如果是这样，就需要下载 Windows Python 安装程序。为此，请访问<http://python.org/downloads/>。你将看到两个按钮，分别用于下载 Python 3 和 Python 2。单击用于下载 Python 3 的按钮，这会根据你的系统自动下载正确的安装程序。下载安装程序后，运行它。请务必选中复选框 Add Python to PATH（如图1-2所示），这让你能够更轻松地配置系统。

![{%}](http://www.ituring.com.cn/figures/2016/PythonProgramme/05.d01z.002.png)

**图1-2　确保选中复选框 Add Python to PATH**

**2. 启动 Python 终端会话**

通过配置系统，让其能够在终端会话中运行 Python，可简化文本编辑器的配置工作。打开一个命令窗口，并在其中执行命令`python`。如果出现了 Python 提示符（`>>>`），就说明 Windows 找到了你刚安装的 Python 版本。

```
C:\> python
Python 3.5.0 (v3.5.0:374f501f4567, Sep 13 2015, 22:15:05) [MSC v.1900 32 bit
(Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>>
```

如果是这样，就可以直接跳到下一部分——“在终端会话中运行 Python”。

然而，输出可能类似于下面这样：

```
C:\> python
'python' is not recognized as an internal or external command, operable
program or batch file.
```

在这种情况下，你就必须告诉 Windows 如何找到你刚安装的 Python 版本。命令`python`通常存储在 C 盘，因此请在 Windows 资源管理器中打开 C 盘，在其中找到并打开以 Python 打头的文件夹，再找到文件 python。例如，在我的计算机中，有一个名为 Python35 的文件夹，其中有一个名为 python 的文件，因此文件 python 的路径为 C:\Python35\python。如果找不到这个文件，请在 Windows 资源管理器的搜索框中输入 python，这将让你能够准确地获悉命令`python`在系统中的存储位置。

如果认为已知道命令`python`的路径，就在终端窗口中输入该路径进行测试。为此，打开一个命令窗口，并输入你确定的完整路径：

```
C:\> C:\Python35\python
Python 3.5.0 (v3.5.0:374f501f4567, Sep 13 2015, 22:15:05) [MSC v.1900 32 bit
(Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>>
```

如果可行，就说明你已经知道如何访问 Python 了。

**3. 在终端会话中运行 Python**

在 Python 会话中执行下面的命令，并确认看到了输出“Hello Python world!”。

```
>>> print("Hello Python world!")
Hello Python world!
>>>
```

每当要运行 Python 代码片段时，都请打开一个命令窗口并启动 Python 终端会话。要关闭该终端会话，可按 Ctrl+Z，再按回车键，也可执行命令`exit()`。

**4. 安装文本编辑器**

Geany 是一款简单的文本编辑器：它易于安装；让你能够直接运行几乎所有的程序（而无需通过终端）；使用不同的颜色来显示代码，以突出代码语法；在终端窗口中运行代码，让你能够习惯使用终端。附录 B 介绍了其他一些文本编辑器，但我强烈建议你使用 Geany，除非你有充分的理由不这样做。

要下载 Windows Geany 安装程序，可访问 <http://geany.org/>，单击 Download 下的 Releases，找到安装程序 geany-1.25_setup.exe 或类似的文件。下载安装程序后，运行它并接受所有的默认设置。

为编写第一个程序，需要启动 Geany。为此，可按超级（Super）键（俗称 Windows 键），并在系统中搜索 Geany。找到 Geany 后，双击以启动它；再将其拖曳到任务栏或桌面上，以创建一个快捷方式。接下来，创建一个用于存储项目的文件夹，并将其命名为 python_work（在文件名和文件夹名中，最好使用小写字母，并使用下划线来表示空格，因为这是 Python 采用的命名约定）。回到 Geany，选择菜单 File ▶ Save As，将当前的空 Python 文件保存到文件夹 python_work，并将其命名为 hello_world.py。扩展名.py 告诉 Geany，文件包含的是 Python 程序；它还让 Geany 知道如何运行该程序，并以有益的方式突出其中的代码。

保存文件后，在其中输入下面一行代码：

```
print("Hello Python world!")
```

如果能够在系统中执行命令`python`，就无需配置 Geany，因此你可以跳过下一部分，直接进入“运行 Hello World程序”部分。如果启动 Python 解释器时必须指定路径，如 C:\Python35\python，请按下面的说明对 Geany 进行配置。

**5. 配置 Geany**

要配置 Geany，请选择菜单 Build ▶ Set Build Commands；你将看到文字 Compile 和 Execute，它们旁边都有一个命令。默认情况下，编译命令和执行命令的开头都是`python`，但 Geany 不知道命令`python`存储在系统的什么地方，因此你需要在其中添加你在终端会话中使用的路径。

为此，在编译命令和执行命令中，加上命令`python`所在的驱动器和文件夹。其中编译命令应类似于下面这样：

```
C:\Python35\python -m py_compile "%f"
```

在你的系统中，路径可能稍有不同，但请务必确保空格和大小写与这里显示的一致。

执行命令应类似于下面这样：

```
C:\Python35\python "%f"
```

同样，指定执行命令时，务必确保空格和大小写与这里显示的一致。图1-3显示了该如何在 Geany 中配置这些命令。

![{%}](http://www.ituring.com.cn/figures/2016/PythonProgramme/05.d01z.003.png)

**图1-3　在 Windows 中配置 Geany，使其使用 Python 3**

正确地设置这些命令后，单击 OK 按钮。

**6. 运行 Hello World 程序**

现在应该能够成功地运行程序了。请运行程序 hello_world.py；为此，可选择菜单 Build ▶ Execute、单击 Execute 图标（两个齿轮）或按 F5。将弹出一个终端窗口，其中包含如下输出：

```
Hello Python world!

------------------
(program exited with code: 0)
Press return to continue
```

如果没有看到这样的输出，请检查你输入的每个字符。你是不是将`print`的首字母大写了？是不是遗漏了引号或括号？编程语言对语法的要求非常严格，只要你没有严格遵守语法，就会出错。如果代码都正确，这个程序也不能正确地运行，请参阅下一节。

### **1.3　解决安装问题**

如果你按前面的步骤做，应该能够成功地搭建编程环境。但如果你始终无法运行程序 hello_world.py，可尝试如下几个解决方案。

- 程序存在严重的错误时，Python 将显示 traceback。Python 会仔细研究文件，试图找出其中的问题。traceback 可能会提供线索，让你知道是什么问题让程序无法运行。
- 离开计算机，先休息一会儿，再尝试。别忘了，在编程中，语法非常重要，即便是少一个冒号、引号不匹配或括号不匹配，都可能导致程序无法正确地运行。请再次阅读本章相关的内容，再次审视你所做的工作，看看能否找出错误。
- 推倒重来。你也许不需要把一切都推倒重来，但将文件 hello_world.py 删除并重新创建它也许是合理的选择。
- 让别人在你的计算机或其他计算机上按本章的步骤重做一遍，并仔细观察。你可能遗漏了一小步，而别人刚好没有遗漏。
- 请懂 Python 的人帮忙。当你有这样的想法时，可能会发现在你认识的人当中就有人使用 Python。
- 本章的安装说明在本书主页上：<http://www.ituring.com.cn/book/1861>。对你来说，在线版也许更合适。
- 到网上寻求帮助。附录 C 提供了很多在线资源，如论坛或在线聊天网站，你可以前往这些地方，请求解决过你面临的问题的人提供解决方案。

不要担心这会打扰经验丰富的程序员。每个程序员都遇到过问题，而大多数程序员都会乐意帮助你正确地设置系统。只要能清晰地说明你要做什么、尝试了哪些方法及其结果，就很可能有人能够帮到你。正如前言中指出的，Python 社区对初学者非常友好。

任何现代计算机都能够运行 Python，如果你遇到了困难，请想办法寻求帮助吧。前期的问题可能令人沮丧，但很值得你花时间去解决。能够运行 hello_world.py 后，你就可以开始学习 Python 了，而且编程工作会更有趣，也更令人愉快。

### **1.4　从终端运行 Python 程序**

你编写的大多数程序都将直接在文本编辑器中运行，但有时候，从终端运行程序很有用。例如，你可能想直接运行既有的程序。

在任何安装了 Python 的系统上都可以这样做，前提是你知道如何进入程序文件所在的目录。为尝试这样做，请确保已将文件 hello_world.py 存储到了桌面的 python_work 文件夹中。

#### **1.4.1　在 Linux 和 OS X 系统中从终端运行 Python 程序**

在 Linux 和 OS X 系统中，从终端运行 Python 程序的方式相同。在终端会话中，可使用终端命令`cd`（表示**切换目录**，change directory）在文件系统中导航。命令`ls`（list 的简写）显示当前目录中所有未隐藏的文件。

为运行程序 hello_world.py，请打开一个新的终端窗口，并执行下面的命令：

```
❶ ~> cd Desktop/python_work/
❷ ~/Desktop/python_work> ls
  hello_world.py
❸ ~/Desktop/python_work> python hello_world.py
  Hello Python world!
```

这里使用了命令`cd`来切换到文件夹 Desktop/python_work（见❶）。接下来，使用命令`ls`来确认这个文件夹中包含文件 hello_world.py（见❷）。最后，使用命令`python hello_world.py`来运行这个文件（见❸）。

就这么简单。要运行 Python 程序，只需使用命令`python`（或`python3`）即可。

#### **1.4.2　在 Windows 系统中从终端运行 Python 程序**

在命令窗口中，要在文件系统中导航，可使用终端命令`cd`；要列出当前目录中的所有文件，可使用命令`dir`（表示目录， directory）。

为运行程序 hello_world.py，请打开一个新的终端窗口，并执行下面的命令：

```
❶ C:\> cd Desktop\python_work
❷ C:\Desktop\python_work> dir
  hello_world.py
❸ C:\Desktop\python_work> python hello_world.py
  Hello Python world!
```

这里使用了命令`cd`来切换到文件夹 Desktop\python_work（见❶）。接下来，使用命令`dir`来确认这个文件夹中包含文件 hello_world.py（见❷）。最后，使用命令`python hello_world.py`来运行这个文件（见❸）。

如果你没有对系统进行配置以使用简单命令`python`，就可能需要指定这个命令的路径：

```
C:\$ cd Desktop\python_work
C:\Desktop\python_work$ dir
hello_world.py
C:\Desktop\python_work$ C:\Python35\python hello_world.py
Hello Python world!
```

大多数程序都可以直接从编辑器运行，但需要解决的问题比较复杂时，你编写的程序可能需要从终端运行。

> **动手试一试**
>
> 本章的练习都是探索性的，但从第2章开始将要求你用那一章学到的知识来解决问题。
>
> **1-1 python.org**：浏览 Python 主页（<http://python.org/>），寻找你感兴趣的主题。你对 Python 越熟悉，这个网站对你来说就越有用。
>
> **1-2 输入错误**：打开你刚创建的文件 hello_world.py，在代码中添加一个输入错误，再运行这个程序。输入错误会引发错误吗？你能理解显示的错误消息吗？你能添加一个不会导致错误的输入错误吗？你凭什么认为它不会导致错误？
>
> **1-3 无穷的技艺**：如果你编程技艺无穷，你打算开发什么样的程序呢？你就要开始学习编程了；如果心中有目标，就能立即将新学到的技能付诸应用；现在正是草拟目标的大好时机。将想法记录下来是个不错的习惯，这样每当需要开始新项目时，都可参考它们。现在请花点时间描绘三个你想创建的程序。

### **1.5　小结**

在本章中，你大致了解了 Python，并在自己的系统中安装了 Python。你还安装了一个文本编辑器，以简化 Python 代码的编写工作。你学习了如何在终端会话中运行 Python 代码片段，并运行了第一个货真价实的程序——hello_world.py。你还大致了解了如何解决安装问题。

在下一章，你将学习如何在 Python 程序中使用各种数据和变量。

## 第2章　变量和简单数据类型

### **老齐导读**

Python 中的数据类型，也可以说成是数据对象。这两种说法是根据不同传统来说的。

书中 2.2.1 中对 Python 中变量命名的规则，是重点，同学要特别注意理解。

字符串和数字，既是简单的数据类型（对象类型），也是组成以后其他类型对象的基础，并且是跟我们所使用的自然语言直接对应的。

建议你学习这部分内容的时候，一定要按照书中的描述，按部就班地敲代码，并且一边敲一边思考。书上的代码，都可以在交互模式中进行，对于学习而言，交互模式比较简单，并且能够直观看到结果（2.3.3 节的代码就是在交互模式中实现的）。

当把书上的代码敲完之后，在交互模式下执行如下操作：

```
>>> name = "hello"
>>> dir(name)
['__add__', '__class__', '__contains__', '__delattr__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'capitalize', 'casefold', 'center', 'count', 'encode', 'endswith', 'expandtabs', 'find', 'format', 'format_map', 'index', 'isalnum', 'isalpha', 'isascii', 'isdecimal', 'isdigit', 'isidentifier', 'islower', 'isnumeric', 'isprintable', 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'maketrans', 'partition', 'replace', 'rfind', 'rindex', 'rjust', 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', 'strip', 'swapcase', 'title', 'translate', 'upper', 'zfill']
```

然后用内置函数`help`查看上面列出的属性和方法的帮助文档。特别是书中提到的字符串的方法，然后根据文档的描述，理解书中的实现方式。

Python 语言的内置函数`dir`和`help`是非常好的学习助手，并且阅读官方文档，也是学习者从一开始就要逐渐学习并掌握的方法，这就是我在“前言”中所说的一种得“渔”之道。

![enter image description here](https://images.gitbook.cn/f02db660-8811-11e9-b1c9-d994bc31f268)

PS：导图橙色内容为相对本书中的拓展知识技能，有兴趣的读者可以深入研究。

> 在本章中，你将学习可在 Python 程序中使用的各种数据，还将学习如何将数据存储到变量中，以及如何在程序中使用这些变量。

### **2.1　运行 hello_world.py 时发生的情况**

运行 hello_world.py 时，Python 都做了些什么呢？下面来深入研究一下。实际上，即便是运行简单的程序，Python 所做的工作也相当多：

**hello_world.py**

```
print("Hello Python world!")
```

运行上述代码时，你将看到如下输出：

```
Hello Python world!
```

运行文件 hello_world.py 时，末尾的.py 指出这是一个 Python 程序，因此编辑器将使用 Python **解释器**来运行它。Python 解释器读取整个程序，确定其中每个单词的含义。例如，看到单词`print`时，解释器就会将括号中的内容打印到屏幕，而不会管括号中的内容是什么。

编写程序时，编辑器会以各种方式突出程序的不同部分。例如，它知道`print`是一个函数的名称，因此将其显示为蓝色；它知道“Hello Python world!”不是 Python 代码，因此将其显示为橙色。这种功能称为**语法突出**，在你刚开始编写程序时很有帮助。

### **2.2　变量**

下面来尝试在 hello_world.py 中使用一个变量。在这个文件开头添加一行代码，并对第2行代码进行修改，如下所示：

```
message = "Hello Python world!"
print(message)
```

运行这个程序，看看结果如何。你会发现，输出与以前相同：

```
Hello Python world!
```

我们添加了一个名为`message`的**变量**。每个变量都存储了一个**值**——与变量相关联的信息。在这里，存储的值为文本“Hello Python world!”。

添加变量导致 Python 解释器需要做更多工作。处理第1行代码时，它将文本“Hello Python world!”与变量`message`关联起来；而处理第2行代码时，它将与变量`message`关联的值打印到屏幕。

下面来进一步扩展这个程序：修改 hello_world.py，使其再打印一条消息。为此，在 hello_world.py 中添加一个空行，再添加下面两行代码：

```
message = "Hello Python world!"
print(message)

message = "Hello Python Crash Course world!"
print(message)
```

现在如果运行这个程序，将看到两行输出：

```
Hello Python world!
Hello Python Crash Course world!
```

在程序中可随时修改变量的值，而 Python 将始终记录变量的最新值。

#### **2.2.1　变量的命名和使用**

在 Python 中使用变量时，需要遵守一些规则和指南。违反这些规则将引发错误，而指南旨在让你编写的代码更容易阅读和理解。请务必牢记下述有关变量的规则。

- 变量名只能包含字母、数字和下划线。变量名可以字母或下划线打头，但不能以数字打头，例如，可将变量命名为 message_1，但不能将其命名为 1_message。
- 变量名不能包含空格，但可使用下划线来分隔其中的单词。例如，变量名 greeting_message 可行，但变量名 greeting message 会引发错误。
- 不要将 Python 关键字和函数名用作变量名，即不要使用 Python 保留用于特殊用途的单词，如`print`（请参见附录 A.4）。
- 变量名应既简短又具有描述性。例如，name 比 n 好，student_name 比 s_n 好，name_length 比 length_of_persons_name 好。
- 慎用小写字母 l 和大写字母 O，因为它们可能被人错看成数字1和0。

要创建良好的变量名，需要经过一定的实践，在程序复杂而有趣时尤其如此。随着你编写的程序越来越多，并开始阅读别人编写的代码，将越来越善于创建有意义的变量名。

> **注意**　
>
> 就目前而言，应使用小写的 Python 变量名。在变量名中使用大写字母虽然不会导致错误，但避免使用大写字母是个不错的主意。

#### **2.2.2　使用变量时避免命名错误**

程序员都会犯错，而且大多数程序员每天都会犯错。虽然优秀的程序员也会犯错，但他们也知道如何高效地消除错误。下面来看一种你可能会犯的错误，并学习如何消除它。

我们将有意地编写一些引发错误的代码。请输入下面的代码，包括其中以粗体显示但拼写不正确的单词 mesage：

```
message = "Hello Python Crash Course reader!"
print(mesage)
```

程序存在错误时，Python 解释器将竭尽所能地帮助你找出问题所在。程序无法成功地运行时，解释器会提供一个 traceback。traceback 是一条记录，指出了解释器尝试运行代码时，在什么地方陷入了困境。下面是你不小心错误地拼写了变量名时，Python 解释器提供的 traceback：

```
  Traceback (most recent call last):
❶   File "hello_world.py", line 2, in <module>
❷     print(mesage)
❸ NameError: name 'mesage' is not defined
```

解释器指出，文件 hello_world.py 的第2行存在错误（见❶）；它列出了这行代码，旨在帮助你快速找出错误（见❷）；它还指出了它发现的是什么样的错误（见❸）。在这里，解释器发现了一个名称错误，并指出打印的变量`mesage`未定义：Python 无法识别你提供的变量名。名称错误通常意味着两种情况：要么是使用变量前忘记了给它赋值，要么是输入变量名时拼写不正确。

在这个示例中，第2行的变量名`message`中遗漏了字母 s。Python 解释器不会对代码做拼写检查，但要求变量名的拼写一致。例如，如果在代码的另一个地方也将 message 错误地拼写成了 mesage，结果将如何呢？

```
mesage = "Hello Python Crash Course reader!"
print(mesage)
```

在这种情况下，程序将成功地运行：

```
Hello Python Crash Course reader!
```

计算机一丝不苟，但不关心拼写是否正确。因此，创建变量名和编写代码时，你无需考虑英语中的拼写和语法规则。

很多编程错误都很简单，只是在程序的某一行输错了一个字符。为找出这种错误而花费很长时间的大有人在。很多程序员天资聪颖、经验丰富，却为找出这种细微的错误花费数小时。你可能觉得这很好笑，但别忘了，在你的编程生涯中，经常会有同样的遭遇。

> **注意**　
>
> 要理解新的编程概念，最佳的方式是尝试在程序中使用它们。如果你在做本书的练习时陷入了困境，请尝试做点其他的事情。如果这样做后依然无法摆脱困境，请复习相关内容。如果这样做后情况依然如故，请参阅附录 C 的建议。

> **动手试一试**
>
> 请完成下面的练习，在做每个练习时，都编写一个独立的程序。保存每个程序时，使用符合标准 Python 约定的文件名：使用小写字母和下划线，如 simple_message.py 和 simple_messages.py。
>
> **2-1 简单消息**：将一条消息存储到变量中，再将其打印出来。
>
> **2-2 多条简单消息**：将一条消息存储到变量中，将其打印出来；再将变量的值修改为一条新消息，并将其打印出来。

### **2.3　字符串**

大多数程序都定义并收集某种数据，然后使用它们来做些有意义的事情。鉴于此，对数据进行分类大有裨益。我们将介绍的第一种数据类型是字符串。字符串虽然看似简单，但能够以很多不同的方式使用它们。

**字符串**就是一系列字符。在 Python 中，用引号括起的都是字符串，其中的引号可以是单引号，也可以是双引号，如下所示：

```
"This is a string."
'This is also a string.'
```

这种灵活性让你能够在字符串中包含引号和撇号：

```
'I told my friend, "Python is my favorite language!"'
"The language 'Python' is named after Monty Python, not the snake."
"One of Python's strengths is its diverse and supportive community."
```

下面来看一些使用字符串的方式。

#### **2.3.1　使用方法修改字符串的大小写**

对于字符串，可执行的最简单的操作之一是修改其中的单词的大小写。请看下面的代码，并尝试判断其作用：

**name.py**

```
name = "ada lovelace"
print(name.title())
```

将这个文件保存为 name.py，再运行它。你将看到如下输出：

```
Ada Lovelace
```

在这个示例中，小写的字符串`"ada lovelace"`存储到了变量`name`中。在`print()`语句中，方法`title()`出现在这个变量的后面。**方法**是 Python 可对数据执行的操作。在`name.title()`中，`name`后面的句点（`.`）让 Python 对变量`name`执行方法`title()`指定的操作。每个方法后面都跟着一对括号，这是因为方法通常需要额外的信息来完成其工作。这种信息是在括号内提供的。函数`title()`不需要额外的信息，因此它后面的括号是空的。

`title()`以首字母大写的方式显示每个单词，即将每个单词的首字母都改为大写。这很有用，因为你经常需要将名字视为信息。例如，你可能希望程序将值`Ada`、`ADA`和`ada`视为同一个名字，并将它们都显示为`Ada`。

还有其他几个很有用的大小写处理方法。例如，要将字符串改为全部大写或全部小写，可以像下面这样做：

```
name = "Ada Lovelace"
print(name.upper())
print(name.lower())
```

这些代码的输出如下：

```
ADA LOVELACE
ada lovelace
```

存储数据时，方法`lower()`很有用。很多时候，你无法依靠用户来提供正确的大小写，因此需要将字符串先转换为小写，再存储它们。以后需要显示这些信息时，再将其转换为最合适的大小写方式。

#### **2.3.2　合并（拼接）字符串**

在很多情况下，都需要合并字符串。例如，你可能想将姓和名存储在不同的变量中，等要显示姓名时再将它们合而为一：

```
  first_name = "ada"
  last_name = "lovelace"
❶ full_name = first_name + " " + last_name

  print(full_name)
```

Python 使用加号（`+`）来合并字符串。在这个示例中，我们使用`+`来合并`first_name`、空格和`last_name`，以得到完整的姓名（见❶），其结果如下：

```
ada lovelace
```

这种合并字符串的方法称为**拼接**。通过拼接，可使用存储在变量中的信息来创建完整的消息。下面来看一个例子：

```
   first_name = "ada"
   last_name = "lovelace"
   full_name = first_name + " " + last_name

❶ print("Hello, " + full_name.title() + "!")
```

在这里，一个问候用户的句子中使用了全名（见❶），并使用了方法`title()`来将姓名设置为合适的格式。这些代码显示一条格式良好的简单问候语：

```
Hello, Ada Lovelace!
```

你可以使用拼接来创建消息，再把整条消息都存储在一个变量中：

```
  first_name = "ada"
  last_name = "lovelace"
  full_name = first_name + " " + last_name

❶ message = "Hello, " + full_name.title() + "!"
❷ print(message)
```

上述代码也显示消息“Hello, Ada Lovelace!”，但将这条消息存储在了一个变量中（见❶），这让最后的`print`语句简单得多（见❷）。

#### **2.3.3　使用制表符或换行符来添加空白**

在编程中，**空白**泛指任何非打印字符，如空格、制表符和换行符。你可使用空白来组织输出，以使其更易读。

要在字符串中添加制表符，可使用字符组合`\t`，如下述代码的❶处所示：

```
  >>> print("Python")
  Python
❶ >>> print("\tPython")
      Python
```

要在字符串中添加换行符，可使用字符组合`\n`：

```
>>> print("Languages:\nPython\nC\nJavaScript")
Languages:
Python
C
JavaScript
```

还可在同一个字符串中同时包含制表符和换行符。字符串`"\n\t"`让 Python 换到下一行，并在下一行开头添加一个制表符。下面的示例演示了如何使用一个单行字符串来生成四行输出：

```
>>> print("Languages:\n\tPython\n\tC\n\tJavaScript")
Languages:
    Python
    C
    JavaScript
```

在接下来的两章中，你将使用为数不多的几行代码来生成很多行输出，届时制表符和换行符将提供极大的帮助。

#### **2.3.4　删除空白**

在程序中，额外的空白可能令人迷惑。对程序员来说，`'python'`和`'python '`看起来几乎没什么两样，但对程序来说，它们却是两个不同的字符串。Python 能够发现`'python '`中额外的空白，并认为它是有意义的——除非你告诉它不是这样的。

空白很重要，因为你经常需要比较两个字符串是否相同。例如，一个重要的示例是，在用户登录网站时检查其用户名。但在一些简单得多的情形下，额外的空白也可能令人迷惑。所幸在 Python 中，删除用户输入的数据中的多余的空白易如反掌。

Python 能够找出字符串开头和末尾多余的空白。要确保字符串末尾没有空白，可使用方法`rstrip()`。

```
❶ >>> favorite_language = 'python '
❷ >>> favorite_language
  'python '
❸ >>> favorite_language.rstrip()
  'python'
❹ >>> favorite_language
  'python '
```

存储在变量`favorite_language`中的字符串末尾包含多余的空白（见❶）。你在终端会话中向 Python 询问这个变量的值时，可看到末尾的空格（见❷）。对变量`favorite_language`调用方法`rstrip()`后（见❸），这个多余的空格被删除了。然而，这种删除只是暂时的，接下来再次询问`favorite_language`的值时，你会发现这个字符串与输入时一样，依然包含多余的空白（见❹）。

要永久删除这个字符串中的空白，必须将删除操作的结果存回到变量中：

```
  >>> favorite_language = 'python '
❶ >>> favorite_language = favorite_language.rstrip()
  >>> favorite_language
  'python'
```

为删除这个字符串中的空白，你需要将其末尾的空白剔除，再将结果存回到原来的变量中（见❶）。在编程中，经常需要修改变量的值，再将新值存回到原来的变量中。这就是变量的值可能随程序的运行或用户输入数据而发生变化的原因。

你还可以剔除字符串开头的空白，或同时剔除字符串两端的空白。为此，可分别使用方法`lstrip()`和`strip()`：

```
❶ >>> favorite_language = ' python '
❷ >>> favorite_language.rstrip()
      ' python'
❸ >>> favorite_language.lstrip()
      'python '
❹ >>> favorite_language.strip()
      'python'
```

在这个示例中，我们首先创建了一个开头和末尾都有空白的字符串（见❶）。接下来，我们分别删除末尾（见❷）、开头（见❸）和两端（见❹）的空格。尝试使用这些剥除函数有助于你熟悉字符串操作。在实际程序中，这些剥除函数最常用于在存储用户输入前对其进行清理。

#### **2.3.5　使用字符串时避免语法错误**

**语法错误**是一种时不时会遇到的错误。程序中包含非法的 Python 代码时，就会导致语法错误。例如，在用单引号括起的字符串中，如果包含撇号，就将导致错误。这是因为这会导致 Python 将第一个单引号和撇号之间的内容视为一个字符串，进而将余下的文本视为 Python 代码，从而引发错误。

下面演示了如何正确地使用单引号和双引号。请将该程序保存为 apostrophe.py，再运行它：

**apostrophe.py**

```
message = "One of Python's strengths is its diverse community."
print(message)
```

撇号位于两个双引号之间，因此 Python 解释器能够正确地理解这个字符串：

```
One of Python's strengths is its diverse community.
```

然而，如果你使用单引号，Python 将无法正确地确定字符串的结束位置：

```
message = 'One of Python's strengths is its diverse community.'
print(message)
```

而你将看到如下输出：

```
  File "apostrophe.py", line 1
    message = 'One of Python's strengths is its diverse community.'
                            ^❶
SyntaxError: invalid syntax
```

从上述输出可知，错误发生在第二个单引号后面（见❶）。这种**语法错误**表明，在解释器看来，其中的有些内容不是有效的 Python 代码。错误的来源多种多样，这里指出一些常见的。学习编写 Python 代码时，你可能会经常遇到语法错误。语法错误也是最不具体的错误类型，因此可能难以找出并修复。受困于非常棘手的错误时，请参阅附录 C 提供的建议。

> **注意**　
>
> 编写程序时，编辑器的语法突出功能可帮助你快速找出某些语法错误。看到 Python 代码以普通句子的颜色显示，或者普通句子以 Python 代码的颜色显示时，就可能意味着文件中存在引号不匹配的情况。

#### **2.3.6　Python 2 中的 print 语句**

在 Python 2 中，`print`语句的语法稍有不同：

```
> python2.7
>>> print "Hello Python 2.7 world!"
Hello Python 2.7 world!
```

在 Python 2 中，无需将要打印的内容放在括号内。从技术上说，Python 3 中的`print`是一个函数，因此括号必不可少。有些 Python 2 `print`语句也包含括号，但其行为与 Python 3 中稍有不同。简单地说，在 Python 2 代码中，有些`print`语句包含括号，有些不包含。

> **动手试一试**
>
> 在做下面的每个练习时，都编写一个独立的程序，并将其保存为名称类似于 name_cases.py 的文件。如果遇到了困难，请休息一会儿或参阅附录 C 提供的建议。
>
> **2-3 个性化消息**：将用户的姓名存到一个变量中，并向该用户显示一条消息。显示的消息应非常简单，如“Hello Eric, would you like to learn some Python today?”。
>
> **2-4 调整名字的大小写**：将一个人名存储到一个变量中，再以小写、大写和首字母大写的方式显示这个人名。
>
> **2-5 名言**：找一句你钦佩的名人说的名言，将这个名人的姓名和他的名言打印出来。输出应类似于下面这样（包括引号）：
>
> Albert Einstein once said, “A person who never made a mistake never tried anything new.”
>
> **2-6 名言2**：重复练习2-5，但将名人的姓名存储在变量`famous_person`中，再创建要显示的消息，并将其存储在变量`message`中，然后打印这条消息。
>
> **2-7 剔除人名中的空白**：存储一个人名，并在其开头和末尾都包含一些空白字符。务必至少使用字符组合`"\t"`和`"\n"`各一次。
>
> 打印这个人名，以显示其开头和末尾的空白。然后，分别使用剔除函数`lstrip()`、`rstrip()`和`strip()`对人名进行处理，并将结果打印出来。

### **2.4　数字**

在编程中，经常使用数字来记录游戏得分、表示可视化数据、存储 Web 应用信息等。Python 根据数字的用法以不同的方式处理它们。鉴于整数使用起来最简单，下面就先来看看 Python 是如何管理它们的。

#### **2.4.1　整数**

在 Python 中，可对整数执行加（`+`）减（`-`）乘（`*`）除（`/`）运算。

```
>>> 2 + 3
5
>>> 3 - 2
1
>>> 2 * 3
6
>>> 3 / 2
1.5
```

在终端会话中，Python 直接返回运算结果。Python 使用两个乘号表示乘方运算：

```
>>> 3 ** 2
9
>>> 3 ** 3
27
>>> 10 ** 6
1000000
```

Python 还支持运算次序，因此你可在同一个表达式中使用多种运算。你还可以使用括号来修改运算次序，让 Python 按你指定的次序执行运算，如下所示：

```
>>> 2 + 3*4
14
>>> (2 + 3) * 4
20
```

在这些示例中，空格不影响 Python 计算表达式的方式，它们的存在旨在让你阅读代码时，能迅速确定先执行哪些运算。

#### **2.4.2　浮点数**

Python 将带小数点的数字都称为**浮点数**。大多数编程语言都使用了这个术语，它指出了这样一个事实：小数点可出现在数字的任何位置。每种编程语言都须细心设计，以妥善地处理浮点数，确保不管小数点出现在什么位置，数字的行为都是正常的。

从很大程度上说，使用浮点数时都无需考虑其行为。你只需输入要使用的数字，Python 通常都会按你期望的方式处理它们：

```
>>> 0.1 + 0.1
0.2
>>> 0.2 + 0.2
0.4
>>> 2 * 0.1
0.2
>>> 2 * 0.2
0.4
```

但需要注意的是，结果包含的小数位数可能是不确定的：

```
>>> 0.2 + 0.1
0.30000000000000004
>>> 3 * 0.1
0.30000000000000004
```

所有语言都存在这种问题，没有什么可担心的。Python 会尽力找到一种方式，以尽可能精确地表示结果，但鉴于计算机内部表示数字的方式，这在有些情况下很难。就现在而言，暂时忽略多余的小数位数即可；在第二部分的项目中，你将学习在需要时处理多余小数位的方式。

#### **2.4.3　使用函数 str() 避免类型错误**

你经常需要在消息中使用变量的值。例如，假设你要祝人生日快乐，可能会编写类似于下面的代码：

**birthday.py**

```
age = 23
message = "Happy " + age + "rd Birthday!"

print(message)
```

你可能认为，上述代码会打印一条简单的生日祝福语：Happy 23rd birthday!。但如果你运行这些代码，将发现它们会引发错误：

```
  Traceback (most recent call last):
    File "birthday.py", line 2, in <module>
      message = "Happy " + age + "rd Birthday!"
❶ TypeError: Can't convert 'int' object to str implicitly
```

这是一个**类型错误**，意味着 Python 无法识别你使用的信息。在这个示例中，Python 发现你使用了一个值为整数（`int`）的变量，但它不知道该如何解读这个值（见❶）。Python 知道，这个变量表示的可能是数值23，也可能是字符2和3。像上面这样在字符串中使用整数时，需要显式地指出你希望 Python 将这个整数用作字符串。为此，可调用函数`str()`，它让 Python 将非字符串值表示为字符串：

```
age = 23
message = "Happy " + str(age) + "rd Birthday!"

print(message)
```

这样，Python 就知道你要将数值23转换为字符串，进而在生日祝福消息中显示字符2和3。经过上述处理后，将显示你期望的消息，而不会引发错误：

```
Happy 23rd Birthday!
```

大多数情况下，在 Python 中使用数字都非常简单。如果结果出乎意料，请检查 Python 是否按你期望的方式将数字解读为了数值或字符串。

#### **2.4.4　Python 2 中的整数**

在 Python 2 中，将两个整数相除得到的结果稍有不同：

```
>>> python2.7
>>> 3 / 2
1
```

Python 返回的结果为1，而不是1.5。在 Python 2 中，整数除法的结果只包含整数部分，小数部分被删除。请注意，计算整数结果时，采取的方式不是四舍五入，而是将小数部分直接删除。

在 Python 2 中，若要避免这种情况，务必确保至少有一个操作数为浮点数，这样结果也将为浮点数：

```
>>> 3 / 2
1
>>> 3.0 / 2
1.5
>>> 3 / 2.0
1.5
>>> 3.0 / 2.0
1.5
```

从 Python 3 转而用 Python 2 或从 Python 2 转而用 Python 3 时，这种除法行为常常会令人迷惑。使用或编写同时使用浮点数和整数的代码时，一定要注意这种异常行为。

> **动手试一试**
>
> **2-8 数字8**：编写4个表达式，它们分别使用加法、减法、乘法和除法运算，但结果都是数字8。为使用`print`语句来显示结果，务必将这些表达式用括号括起来，也就是说，你应该编写4行类似于下面的代码：
>
> ```
> print(5 + 3)
> ```
>
> 输出应为4行，其中每行都只包含数字8。
>
> **2-9 最喜欢的数字**：将你最喜欢的数字存储在一个变量中，再使用这个变量创建一条消息，指出你最喜欢的数字，然后将这条消息打印出来。

### **2.5　注释**

在大多数编程语言中，注释都是一项很有用的功能。本书前面编写的程序中都只包含 Python 代码，但随着程序越来越大、越来越复杂，就应在其中添加说明，对你解决问题的方法进行大致的阐述。**注释**让你能够使用自然语言在程序中添加说明。

#### **2.5.1　如何编写注释**

在 Python 中，注释用井号（`#`）标识。井号后面的内容都会被 Python 解释器忽略，如下所示：

**comment.py**

```
# 向大家问好
print("Hello Python people!")
```

Python 解释器将忽略第1行，只执行第2行。

```
Hello Python people!
```

#### **2.5.2　该编写什么样的注释**

编写注释的主要目的是阐述代码要做什么，以及是如何做的。在开发项目期间，你对各个部分如何协同工作了如指掌，但过段时间后，有些细节你可能不记得了。当然，你总是可以通过研究代码来确定各个部分的工作原理，但通过编写注释，以清晰的自然语言对解决方案进行概述，可节省很多时间。

要成为专业程序员或与其他程序员合作，就必须编写有意义的注释。当前，大多数软件都是合作编写的，编写者可能是同一家公司的多名员工，也可能是众多致力于同一个开源项目的人员。训练有素的程序员都希望代码中包含注释，因此你最好从现在开始就在程序中添加描述性注释。作为新手，最值得养成的习惯之一是，在代码中编写清晰、简洁的注释。

如果不确定是否要编写注释，就问问自己，找到合理的解决方案前，是否考虑了多个解决方案。如果答案是肯定的，就编写注释对你的解决方案进行说明吧。相比回过头去再添加注释，删除多余的注释要容易得多。从现在开始，本书的示例都将使用注释来阐述代码的工作原理。

> **动手试一试**
>
> **2-10 添加注释**：选择你编写的两个程序，在每个程序中都至少添加一条注释。如果程序太简单，实在没有什么需要说明的，就在程序文件开头加上你的姓名和当前日期，再用一句话阐述程序的功能。

### **2.6　Python 之禅**

编程语言 Perl 曾在互联网领域长期占据着统治地位，早期的大多数交互式网站使用的都是 Perl 脚本。彼时，“解决问题的办法有多个”被 Perl 社区奉为座右铭。这种理念一度深受大家的喜爱，因为这种语言固有的灵活性使得大多数问题都有很多不同的解决之道。在开发项目期间，这种灵活性是可以接受的，但大家最终认识到，过于强调灵活性会导致大型项目难以维护：要通过研究代码搞清楚当时解决复杂问题的人是怎么想的，既困难又麻烦，还会耗费大量的时间。

经验丰富的程序员倡导尽可能避繁就简。Python 社区的理念都包含在 Tim Peters 撰写的“Python 之禅”中。要获悉这些有关编写优秀 Python 代码的指导原则，只需在解释器中执行命令`import this`。这里不打算赘述整个“Python 之禅”，而只与大家分享其中的几条原则，让你明白为何它们对 Python 新手来说至关重要。

```
>>> import this
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
```

Python 程序员笃信代码可以编写得漂亮而优雅。编程是要解决问题的，设计良好、高效而漂亮的解决方案都会让程序员心生敬意。随着你对 Python 的认识越来越深入，并使用它来编写越来越多的代码，有一天也许会有人站在你后面惊呼：“哇，代码编写得真是漂亮！”

```
Simple is better than complex.
```

如果有两个解决方案，一个简单，一个复杂，但都行之有效，就选择简单的解决方案吧。这样，你编写的代码将更容易维护，你或他人以后改进这些代码时也会更容易。

```
Complex is better than complicated.
```

现实是复杂的，有时候可能没有简单的解决方案。在这种情况下，就选择最简单可行的解决方案吧。

```
Readability counts.
```

即便是复杂的代码，也要让它易于理解。开发的项目涉及复杂代码时，一定要为这些代码编写有益的注释。

```
There should be one-- and preferably only one --obvious way to do it.
```

如果让两名 Python 程序员去解决同一个问题，他们提供的解决方案应大致相同。这并不是说编程没有创意空间，而是恰恰相反！然而，大部分编程工作都是使用常见解决方案来解决简单的小问题，但这些小问题都包含在更庞大、更有创意空间的项目中。在你的程序中，各种具体细节对其他 Python 程序员来说都应易于理解。

```
Now is better than never.
```

你可以将余生都用来学习 Python 和编程的纷繁难懂之处，但这样你什么项目都完不成。不要企图编写完美无缺的代码；先编写行之有效的代码，再决定是对其做进一步改进，还是转而去编写新代码。

等你进入下一章，开始研究更复杂的主题时，务必牢记这种简约而清晰的理念。如此，经验丰富的程序员定将对你编写的代码心生敬意，进而乐意向你提供反馈，并与你合作开发有趣的项目。

> **动手试一试**
>
> **2-11 Python 之禅**：在 Python 终端会话中执行命令`import this`，并粗略地浏览一下其他的指导原则。

### **2.7　小结**

在本章中，你学习了：如何使用变量；如何创建描述性变量名以及如何消除名称错误和语法错误；字符串是什么，以及如何使用小写、大写和首字母大写方式显示字符串；使用空白来显示整洁的输出，以及如何剔除字符串中多余的空白；如何使用整数和浮点数；使用数值数据时需要注意的意外行为。你还学习了如何编写说明性注释，让代码对你和其他人来说更容易理解。最后，你了解了让代码尽可能简单的理念。

在第3章，你将学习如何在被称为**列表**的变量中存储信息集，以及如何通过遍历列表来操作其中的信息。